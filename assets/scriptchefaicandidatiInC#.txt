using System;
using System.Collections.Generic;
using System.Linq;

namespace scriptchefaicandidati
{
    class Program
    {
        static void Main(string[] args)
        {
            String candidatiraw = "1.SANESE TOMMASO detto “TOMMI”2.ZINI MARIA detta “MERI” 3.GALLI SARA detta “SARA”4.TALLAWI ISSA detto “ISSA”5.CANTALE MARIA VERONICA 6.ALBERTON ELISABETTA detta “BETTA”7.TAFFA ELISABETTA detta “ELI”8.GALBIATI MARCO detto “CALI”9.DE FRE MARTA detta “MARTA”10.RABAIOLI PIETRO detto “RABA”11.YOUNG ISAAC JASON detto “ ISAAC”12.STRINGHETTI MARCO detto “STRINGO”13.BALDELLI SARA MICOL";
            candidatiraw = rimuovinumeri(candidatiraw);
            String lista = "ternasinistrorsa";            
            String[] candidati = candidatiraw.Split(".");
            var candidatilista = candidati.ToList();
            candidatilista.RemoveAt(0);
            candidati = candidatilista.ToArray();
            String[] listadetti = listadettifunzione(candidati);
            var candidatistringa = candidati.ToList();
            int id = 0;
            foreach (var candidato in candidatistringa)
            {
                var candidatolower = candidato.ToLower();
                var candidatolowersubstring = candidatolower.Substring(0, candidatolower.Length);
                var candidatoconspazio = candidatolowersubstring.Trim().Replace(" ", "_");
                candidatolowersubstring = upper(candidatolowersubstring);
                Console.WriteLine("{"+"id: "+ id +" , imgUrl: \"/img/candidati/" + lista + "/" + candidatoconspazio +".jpg\", name: \"" + candidatolowersubstring + "\", detto: \"" + listadetti[id] + "\"" + "},");
                id++;
            }

            

            //candidati.ToList().ForEach(elem=> { elem. })
        }

        private static string[] listadettifunzione(string[] candidati)
        {
            List<String> listadettiritorno = new List<string>();
            for (int i = 0; i < candidati.Length; i++)
            {
                candidati[i] = candidati[i].Trim();
                if (candidati[i].Contains("detta “"))
                {
                    String[] dettoString = candidati[i].Split("detta “");
                    candidati[i] = dettoString[0].Trim();
                    String detto = dettoString[1].Substring(0, dettoString[1].Length - 1).Trim();
                    listadettiritorno.Add(detto);
                }
                else if (candidati[i].Contains("detto “"))
                {
                    String[] dettoString = candidati[i].Split("detto “");
                    candidati[i] = dettoString[0].Trim();
                    String detto = dettoString[1].Substring(0, dettoString[1].Length - 1).Trim();
                    listadettiritorno.Add(detto);
                } else
                {
                    listadettiritorno.Add("");
                }
            }
            return listadettiritorno.ToArray();
        }

        private static String rimuovinumeri(string candidati)
        {
            String nuove = "";
            foreach (var carattere in candidati)
            {
                if(carattere >= '0' && carattere <= '9')
                {

                } else
                {
                    nuove += carattere;
                }
            }
            return nuove;

        }

        private static String upper(string candidato)
        {
            String[] splittati = candidato.Split(" ");
            String nuova= "";
            foreach(var pezzo in splittati)
            {
                if (pezzo.Length > 0)
                    nuova += pezzo[0].ToString().ToUpper() + pezzo.Substring(1) + " ";
            }

            return nuova.Trim();
        }
    }
}
